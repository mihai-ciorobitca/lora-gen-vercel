<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <base href="{{ url_for('static', filename='') }}">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Tickets List | TailAdmin - Tailwind CSS Admin Dashboard Template</title>

  <link href="css/style.css" rel="stylesheet">
  <script defer src="js/s.js" referrerpolicy="origin"></script>
</head>

<body
  x-data="{ page: 'ticketLists', loaded: true, darkMode: false, stickyMenu: false, sidebarToggle: false, scrollTop: false }"
  x-init="
    darkMode = JSON.parse(localStorage.getItem('darkMode'));
    $watch('darkMode', value => localStorage.setItem('darkMode', JSON.stringify(value)))"
  :class="{ 'dark bg-gray-900': darkMode }">

  <!-- Preloader Start -->
  <div x-show="loaded"
       x-init="window.addEventListener('DOMContentLoaded', () => {setTimeout(() => loaded = false, 500)})"
       class="fixed left-0 top-0 z-50 flex h-screen w-screen items-center justify-center bg-white dark:bg-black"
       style="display: none;">
    <div class="h-16 w-16 animate-spin rounded-full border-4 border-solid border-brand-500 border-t-transparent"></div>
  </div>
  <!-- Preloader End -->

  <!-- Page Wrapper Start -->
  <div class="flex h-screen overflow-hidden">
    <!-- Sidebar Start -->
    <aside :class="sidebarToggle ? 'translate-x-0 xl:w-[90px]' : '-translate-x-full'"
           class="sidebar fixed top-0 left-0 z-50 flex h-screen w-[290px] flex-col overflow-y-auto border-r border-gray-200 bg-white px-5 transition-all duration-300 xl:static xl:translate-x-0 dark:border-gray-800 dark:bg-black"
           @click.outside="sidebarToggle = false">
      <!-- Sidebar Header -->
      <div :class="sidebarToggle ? 'justify-center' : 'justify-between'" class="sidebar-header flex items-center gap-2 pt-8 pb-7 justify-between">
        <a>
          <span class="logo" :class="sidebarToggle ? 'hidden' : ''">
            <img class="dark:hidden" src="./dashboard_files/logo.svg" alt="Logo">
            <img class="hidden dark:block" src="./dashboard_files/logo-dark.svg" alt="Logo">
          </span>
          <img class="logo-icon hidden" :class="sidebarToggle ? 'xl:block' : 'hidden'" src="./dashboard_files/logo-icon.svg" alt="Logo">
        </a>
      </div>
      <!-- Sidebar Header -->

      <!-- Sidebar Menu -->
      <div class="no-scrollbar flex flex-col overflow-y-auto duration-300 ease-linear">
        <nav x-data="{ selected: $persist('Dashboard') }">
          <div>
            <h3 class="mb-4 text-xs leading-[20px] text-gray-400 uppercase">
              <span class="menu-group-title" :class="sidebarToggle ? 'xl:hidden' : ''">MENU</span>
            </h3>
            <ul class="mb-6 flex flex-col gap-1">
              <!-- Dashboard -->
              <li>
                <a href="{{ url_for('dashboard.dashboard_get') }}"
                   @click="selected = (selected === 'Dashboard' ? '' : 'Dashboard')"
                   class="menu-item group"
                   :class="selected === 'Dashboard' ? 'menu-item-active' : 'menu-item-inactive'">
                  <span class="menu-item-text" :class="sidebarToggle ? 'xl:hidden' : ''">Dashboard</span>
                </a>
              </li>

              <!-- Profile -->
              <li>
                <a href="{{ url_for('dashboard.dashboard_user') }}"
                   @click="selected = (selected === 'Profile' ? '' : 'Profile')"
                   class="menu-item group"
                   :class="(selected === 'Profile') ? 'menu-item-active' : 'menu-item-inactive'">
                  <span class="menu-item-text" :class="sidebarToggle ? 'xl:hidden' : ''">User Profile</span>
                </a>
              </li>

              <!-- Jobs -->
              <li>
                <a href="{{ url_for('dashboard.dashboard_jobs') }}"
                   @click.prevent="selected = (selected === 'Jobs' ? '' : 'Jobs')"
                   class="menu-item group"
                   :class="(selected === 'Jobs') ? 'menu-item-active' : 'menu-item-inactive'">
                  <span class="menu-item-text" :class="sidebarToggle ? 'xl:hidden' : ''">Jobs</span>
                </a>
              </li>
            </ul>
          </div>
        </nav>
      </div>
      <!-- Sidebar Menu -->
    </aside>
    <!-- Sidebar End -->

    <!-- Content Area Start -->
    <div class="relative flex flex-1 flex-col overflow-x-hidden overflow-y-auto">
      <!-- Small Device Overlay Start -->
      <div :class="sidebarToggle ? 'block xl:hidden' : 'hidden'" class="fixed z-50 h-screen w-full bg-gray-900/50 hidden"></div>
      <!-- Small Device Overlay End -->

      <!-- Header Start -->
      <header x-data="{ menuToggle: false }"
              class="sticky top-0 z-50 flex w-full border-gray-200 bg-white xl:border-b dark:border-gray-800 dark:bg-gray-900">
        <div class="flex grow flex-col items-center justify-between xl:flex-row xl:px-6">
          <div class="flex w-full items-center justify-between gap-2 border-b border-gray-200 px-3 py-3 sm:gap-4 lg:py-4 xl:justify-normal xl:border-b-0 xl:px-0 dark:border-gray-800">
            <!-- Hamburger Button -->
            <button :class="sidebarToggle ? 'xl:bg-transparent dark:xl:bg-transparent bg-gray-100 dark:bg-gray-800' : ''"
                    class="flex h-10 w-10 items-center justify-center rounded-lg border-gray-200 text-gray-500 xl:h-11 xl:w-11 xl:border dark:border-gray-800 dark:text-gray-400"
                    @click.stop="sidebarToggle = !sidebarToggle">
              <svg class="fill-current xl:hidden block" width="24" height="24"><path d="M4 6H20M4 12H12M4 18H20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            </button>

            <a class="xl:hidden">
              <img class="dark:hidden" src="./dashboard_files/logo.svg" alt="Logo">
              <img class="hidden dark:block" src="./dashboard_files/logo-dark.svg" alt="Logo">
            </a>

            <!-- Dark Mode & User Menu -->
            <div class="flex items-center gap-2">
              <!-- Dark Mode Toggler -->
              <button class="hover:text-dark-900 relative flex h-11 w-11 items-center justify-center rounded-full border border-gray-200 bg-white text-gray-500 dark:border-gray-800 dark:bg-gray-900 dark:text-gray-400"
                      @click.prevent="darkMode = !darkMode">
                <svg class="hidden dark:block" width="20" height="20"><circle cx="10" cy="10" r="5" fill="currentColor"/></svg>
              </button>

              <!-- User Dropdown -->
              <div class="relative" x-data="{ dropdownOpen: false }" @click.outside="dropdownOpen = false">
                <a class="flex items-center text-gray-700 dark:text-gray-400 cursor-pointer" @click.prevent="dropdownOpen = !dropdownOpen">
                  <span class="mr-3 h-11 w-11 overflow-hidden rounded-full">
                    <img class="h-11 w-11 rounded-full" src="https://www.gravatar.com/avatar/?d=mp&s=96" alt="User avatar">
                  </span>
                  <span class="text-theme-sm block font-medium">{{ user.full_name }}</span>
                  <svg :class="dropdownOpen && 'rotate-180'" class="stroke-gray-500 dark:stroke-gray-400" width="18" height="20"><path d="M4.3125 8.65625L9 13.3437L13.6875 8.65625" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </a>

                <div x-show="dropdownOpen"
                     class="absolute right-0 mt-2 flex w-[260px] flex-col rounded-2xl border border-gray-200 bg-white p-3 dark:border-gray-800 dark:bg-gray-dark"
                     style="display: none;">
                  <span class="block font-medium text-gray-700 dark:text-gray-400">{{ user.full_name }}</span>
                  <span class="block text-gray-500 dark:text-gray-400">{{ user.email }}</span>

                  <form method="POST" action="{{ url_for('auth.logout') }}">
                    <button class="mt-3 flex items-center gap-2 rounded-lg border border-gray-200 px-3 py-2 text-gray-500 hover:bg-gray-100 dark:border-gray-800 dark:hover:bg-gray-800 dark:text-gray-400">
                      Logout
                    </button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>
      <!-- Header End -->

      <!-- Main Content Start -->
      <main class="p-4 sm:p-6 lg:p-8">
        <!-- Jobs Grid -->
        <div class="overflow-y-auto rounded-lg border border-gray-200 dark:border-gray-700" style="height: calc(100vh - 300px);">
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 p-4">
            {% for job in jobs %}
            <div class="bg-white dark:bg-gray-900 rounded-2xl shadow-md overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-xl">
              <!-- Image Preview -->
              <div class="relative">
                {% if job.status %}
                <img src="https://ntvibateqvasbeygcsvr.supabase.co/storage/v1/object/public/{{ user.email }}/{{ job.id }}.jpeg"
                     alt="Preview" class="w-full h-48 object-cover rounded-t-2xl">
                {% endif %}
              </div>
              <!-- Job Info -->
              <div class="p-4">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white">{{ job.title }}</h3>
                <p class="text-sm text-gray-500 dark:text-gray-400">{{ job.description }}</p>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </main>
      <!-- Main Content End -->

    </div>
    <!-- Content Area End -->
  </div>
  <!-- Page Wrapper End -->

  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</body>

</html>
